(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{143:function(e,a,t){e.exports=t.p+"static/media/angry.e5c2193c.png"},144:function(e,a,t){e.exports=t.p+"static/media/disgusted.247bc5f4.png"},145:function(e,a,t){e.exports=t.p+"static/media/fearful.0298f67b.png"},146:function(e,a,t){e.exports=t.p+"static/media/happy.ef7f6f04.png"},147:function(e,a,t){e.exports=t.p+"static/media/sad.dda3926e.png"},148:function(e,a,t){e.exports=t.p+"static/media/surprised.790e88cd.png"},231:function(e,a,t){e.exports=t(363)},236:function(e,a,t){},359:function(e,a){},360:function(e,a){},361:function(e,a){},363:function(e,a,t){"use strict";t.r(a);var n=t(2),r=t.n(n),i=t(28),c=t.n(i),s=t(22),o=(t(236),t(19)),u=t(6),l=t(55),m=t.n(l),p=t(11),d=t.n(p),g=t(365);var f=d()(function(e){return{main:Object(o.a)({width:"auto",display:"block",marginLeft:3*e.spacing.unit,marginRight:3*e.spacing.unit},e.breakpoints.up(400+3*e.spacing.unit*2),{width:400,marginLeft:"auto",marginRight:"auto"}),paper:{marginTop:8*e.spacing.unit,display:"flex",flexDirection:"column",alignItems:"center",padding:"".concat(2*e.spacing.unit,"px ").concat(3*e.spacing.unit,"px ").concat(3*e.spacing.unit,"px")},avatar:{margin:e.spacing.unit,backgroundColor:e.palette.secondary.main},submit:{marginTop:3*e.spacing.unit}}})(function(e){var a=e.classes;return r.a.createElement("main",{className:a.main},r.a.createElement(u.h,{className:a.paper},r.a.createElement(u.a,{className:a.avatar},r.a.createElement(m.a,null)),r.a.createElement(u.i,{component:"h1",variant:"h5"},"Hello Guest!"),r.a.createElement(u.b,{type:"submit",fullWidth:!0,variant:"contained",color:"secondary",component:g.a,to:"/register",className:a.submit},"Register"),r.a.createElement(u.b,{type:"submit",fullWidth:!0,variant:"contained",color:"secondary",component:g.a,to:"/login",className:a.submit},"Login"),r.a.createElement(u.b,{type:"submit",fullWidth:!0,variant:"contained",color:"secondary",component:g.a,to:"/dashboard",className:a.submit},"Dashboard")))}),h=t(20),b=t.n(h),v=t(27),E=t(58),y=t.n(E),x=t(368),w=t(56),O=t(57),j=t(63),k=(t(323),t(325),{apiKey:"AIzaSyBQUbSmCbR4jJKA9HD2UttIZL542EK6fAE",authDomain:"musiclife-56317.firebaseapp.com",databaseURL:"https://musiclife-56317-default-rtdb.europe-west1.firebasedatabase.app",projectId:"musiclife-56317",storageBucket:"musiclife-56317.appspot.com",measurementId:"G-BYNKLEYZ48"}),N=new(function(){function e(){Object(w.a)(this,e),j.a.initializeApp(k),this.auth=j.a.auth(),this.db=j.a.firestore()}return Object(O.a)(e,[{key:"login",value:function(e,a){return this.auth.signInWithEmailAndPassword(e,a)}},{key:"logout",value:function(){return this.auth.signOut()}},{key:"register",value:function(){var e=Object(v.a)(b.a.mark(function e(a,t,n,r){var i=this;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.auth.createUserWithEmailAndPassword(t,n).then(function(e){i.db.collection("usuarios").doc(e.user.uid).set({username:a,email:t,gender:r})});case 2:return e.abrupt("return",this.auth.currentUser.updateProfile({displayName:a}));case 3:case"end":return e.stop()}},e,this)}));return function(a,t,n,r){return e.apply(this,arguments)}}()},{key:"isInitialized",value:function(){var e=this;return new Promise(function(a){e.auth.onAuthStateChanged(a)})}},{key:"getCurrentUsername",value:function(){return this.auth.currentUser&&this.auth.currentUser.displayName}},{key:"getUser",value:function(){var e=Object(v.a)(b.a.mark(function e(){return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.auth.currentUser;case 2:if(e.t0=e.sent,!e.t0){e.next=5;break}e.t0=this.db.collection("usuarios").doc(this.auth.currentUser.uid).get().then(function(e){return e.data()});case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}]),e}());var U=Object(x.a)(d()(function(e){return{main:Object(o.a)({width:"auto",display:"block",marginLeft:3*e.spacing.unit,marginRight:3*e.spacing.unit},e.breakpoints.up(400+3*e.spacing.unit*2),{width:400,marginLeft:"auto",marginRight:"auto"}),paper:{marginTop:8*e.spacing.unit,display:"flex",flexDirection:"column",alignItems:"center",padding:"".concat(2*e.spacing.unit,"px ").concat(3*e.spacing.unit,"px ").concat(3*e.spacing.unit,"px")},avatar:{margin:e.spacing.unit,backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing.unit},submit:{marginTop:3*e.spacing.unit}}})(function(e){var a=e.classes,t=Object(n.useState)(""),i=Object(s.a)(t,2),c=i[0],o=i[1],l=Object(n.useState)(""),m=Object(s.a)(l,2),p=m[0],d=m[1];return r.a.createElement("main",{className:a.main},r.a.createElement(u.h,{className:a.paper},r.a.createElement(u.a,{className:a.avatar},r.a.createElement(y.a,null)),r.a.createElement(u.i,{component:"h1",variant:"h5"},"Sign in"),r.a.createElement("form",{className:a.form,onSubmit:function(e){return e.preventDefault()&&!1}},r.a.createElement(u.e,{margin:"normal",required:!0,fullWidth:!0},r.a.createElement(u.g,{htmlFor:"email"},"Email Address"),r.a.createElement(u.f,{id:"email",name:"email",autoComplete:"off",autoFocus:!0,value:c,onChange:function(e){return o(e.target.value)}})),r.a.createElement(u.e,{margin:"normal",required:!0,fullWidth:!0},r.a.createElement(u.g,{htmlFor:"password"},"Password"),r.a.createElement(u.f,{name:"password",type:"password",id:"password",autoComplete:"off",value:p,onChange:function(e){return d(e.target.value)}})),r.a.createElement(u.b,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){return f.apply(this,arguments)},className:a.submit},"Sign in"),r.a.createElement(u.b,{type:"submit",fullWidth:!0,variant:"contained",color:"secondary",component:g.a,to:"/register",className:a.submit},"Register"))));function f(){return(f=Object(v.a)(b.a.mark(function a(){return b.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,N.login(c,p);case 3:e.history.replace("/dashboard"),a.next=9;break;case 6:a.prev=6,a.t0=a.catch(0),alert(a.t0.message);case 9:case"end":return a.stop()}},a,null,[[0,6]])}))).apply(this,arguments)}})),C=t(54),S=t.n(C),L=t(41),I=t.n(L);var W=Object(x.a)(d()(function(e){return{main:Object(o.a)({width:"auto",display:"block",marginLeft:3*e.spacing.unit,marginRight:3*e.spacing.unit},e.breakpoints.up(400+3*e.spacing.unit*2),{width:400,marginLeft:"auto",marginRight:"auto"}),paper:{marginTop:8*e.spacing.unit,display:"flex",flexDirection:"column",alignItems:"center",padding:"".concat(2*e.spacing.unit,"px ").concat(3*e.spacing.unit,"px ").concat(3*e.spacing.unit,"px")},avatar:{margin:e.spacing.unit,backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing.unit},submit:{marginTop:3*e.spacing.unit},gender:{width:"100%"}}})(function(e){var a=e.classes,t=Object(n.useState)(""),i=Object(s.a)(t,2),c=i[0],o=i[1],l=Object(n.useState)(""),m=Object(s.a)(l,2),p=m[0],d=m[1],f=Object(n.useState)(""),h=Object(s.a)(f,2),E=h[0],x=h[1],w=Object(n.useState)(""),O=Object(s.a)(w,2),j=O[0],k=O[1];return r.a.createElement("main",{className:a.main},r.a.createElement(u.h,{className:a.paper},r.a.createElement(u.a,{className:a.avatar},r.a.createElement(y.a,null)),r.a.createElement(u.i,{component:"h1",variant:"h5"},"Register Account"),r.a.createElement("form",{className:a.form,onSubmit:function(e){return e.preventDefault()&&!1}},r.a.createElement(u.e,{margin:"normal",required:!0,fullWidth:!0},r.a.createElement(u.g,{htmlFor:"name"},"Name"),r.a.createElement(u.f,{id:"name",name:"name",autoComplete:"off",autoFocus:!0,value:c,onChange:function(e){return o(e.target.value)}})),r.a.createElement(u.e,{margin:"normal",required:!0,fullWidth:!0},r.a.createElement(u.g,{htmlFor:"email"},"Email Address"),r.a.createElement(u.f,{id:"email",name:"email",autoComplete:"off",value:p,onChange:function(e){return d(e.target.value)}})),r.a.createElement(u.e,{margin:"normal",required:!0,fullWidth:!0},r.a.createElement(u.g,{htmlFor:"password"},"Password"),r.a.createElement(u.f,{name:"password",type:"password",id:"password",autoComplete:"off",value:E,onChange:function(e){return x(e.target.value)}})),r.a.createElement(u.e,{className:a.gender},r.a.createElement(u.g,{id:"demo-simple-select-label"},"Gender"),r.a.createElement(S.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:j,onChange:function(e){k(e.target.value)}},r.a.createElement(I.a,{value:"male"},"Male"),r.a.createElement(I.a,{value:"female"},"Female"))),r.a.createElement(u.b,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){return U.apply(this,arguments)},className:a.submit},"Register"),r.a.createElement(u.b,{type:"submit",fullWidth:!0,variant:"contained",color:"secondary",component:g.a,to:"/login",className:a.submit},"Go back to Login"))));function U(){return(U=Object(v.a)(b.a.mark(function a(){return b.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,N.register(c,p,E,j);case 3:e.history.replace("/dashboard"),a.next=9;break;case 6:a.prev=6,a.t0=a.catch(0),alert(a.t0.message);case 9:case"end":return a.stop()}},a,null,[[0,6]])}))).apply(this,arguments)}})),F=t(33),M=t(149),R=t(143),A=t.n(R),D=t(144),T=t.n(D),P=t(145),G=t.n(P),z=t(146),B=t.n(z),q=t(97),H=t.n(q),K=t(147),J=t.n(K),Y=t(148),Z=t.n(Y),Q=t(52),V=t.n(Q),X={angry:{name:"Angry",src:A.a},disgusted:{name:"Disgusted",src:T.a},fearful:{name:"Fearful",src:G.a},happy:{name:"Happy",src:B.a},neutral:{name:"Neutral",src:H.a},sad:{name:"Sad",src:J.a},surprised:{name:"Surprised",src:Z.a}},$=Object(M.a)({canvas:{width:"100%"},video:{position:"fixed",opacity:0,visibility:"hidden"},avatar:{width:100,height:100,margin:"0 auto"}})(function(e){var a=e.classes;Object(n.useEffect)(function(){u()},[]);var t=Object(n.useState)("neutral"),i=Object(s.a)(t,2),c=i[0],o=i[1],u=function(){var e=Object(v.a)(b.a.mark(function e(){var a,t;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=function(){navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia||navigator.oGetUserMedia,navigator.getUserMedia&&navigator.getUserMedia({video:{}},function(e){return a.srcObject=e},function(e){return console.error(e)})},Promise.all([F.d.tinyFaceDetector.loadFromUri("./models"),F.d.faceLandmark68Net.loadFromUri("./models"),F.d.faceExpressionNet.loadFromUri("./models")]).then(t),(a=document.getElementById("video")).addEventListener("play",function(){var e=document.getElementById("canvas"),t={width:a.videoWidth,height:a.videoHeight};F.c(e,t),setInterval(Object(v.a)(b.a.mark(function e(){var t,n,r,i,c;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F.b(a,new F.a).withFaceLandmarks().withFaceExpressions();case 2:(t=e.sent)&&(n=t.expressions,r=Object.values(n),i=r.indexOf(Math.max.apply(Math,r)),c=Object.getOwnPropertyNames(n)[i],o(c));case 4:case"end":return e.stop()}},e)})),3e4)});case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement("div",{style:{display:"flex"}},r.a.createElement(V.a,{alt:"MoodState",src:void 0!==X[c]?X[c].src:H.a,className:a.avatar})),r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement("h1",null,void 0!==X[c]?X[c].name:"Detecting...")),r.a.createElement("canvas",{id:"canvas",className:a.video}),r.a.createElement("video",{id:"video",width:"100%",height:"auto",autoPlay:!0,muted:!0,className:a.video}))});var _=Object(x.a)(d()(function(e){return{main:Object(o.a)({width:"auto",display:"block",marginLeft:3*e.spacing.unit,marginRight:3*e.spacing.unit},e.breakpoints.up(400+3*e.spacing.unit*2),{width:400,marginLeft:"auto",marginRight:"auto"}),paper:{marginTop:8*e.spacing.unit,display:"flex",flexDirection:"column",alignItems:"center",padding:"".concat(2*e.spacing.unit,"px ").concat(3*e.spacing.unit,"px ").concat(3*e.spacing.unit,"px")},avatar:{margin:e.spacing.unit,backgroundColor:e.palette.secondary.main},submit:{marginTop:3*e.spacing.unit}}})(function(e){var a=e.classes,t=Object(n.useState)(null),i=Object(s.a)(t,2),c=i[0],o=i[1];return Object(n.useEffect)(function(){N.getUser().then(o)},[]),N.getCurrentUsername()?r.a.createElement("main",{className:a.main},r.a.createElement(u.h,{className:a.paper},r.a.createElement(u.a,{className:a.avatar},r.a.createElement(m.a,null)),r.a.createElement($,null),r.a.createElement(u.i,{component:"h1",variant:"h5"},"Hello ",c&&c.username),r.a.createElement(u.i,{component:"h1",variant:"h5"},"Your Gender: ",c?'"'.concat(c.gender,'"'):r.a.createElement(u.c,{size:20})),r.a.createElement(u.b,{type:"submit",fullWidth:!0,variant:"contained",color:"secondary",onClick:function(){return l.apply(this,arguments)},className:a.submit},"Logout"))):(alert("Please login first"),e.history.replace("/login"),null);function l(){return(l=Object(v.a)(b.a.mark(function a(){return b.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,N.logout();case 2:e.history.push("/");case 3:case"end":return a.stop()}},a)}))).apply(this,arguments)}})),ee=t(25),ae=t(367),te=t(369),ne=t(366),re=Object(ee.createMuiTheme)();function ie(){var e=Object(n.useState)(!1),a=Object(s.a)(e,2),t=a[0],i=a[1];return Object(n.useEffect)(function(){N.isInitialized().then(function(e){i(e)})}),!1!==t?r.a.createElement(ee.MuiThemeProvider,{theme:re},r.a.createElement(u.d,null),r.a.createElement(ae.a,null,r.a.createElement(te.a,null,r.a.createElement(ne.a,{exact:!0,path:"/",component:f}),r.a.createElement(ne.a,{exact:!0,path:"/login",component:U}),r.a.createElement(ne.a,{exact:!0,path:"/register",component:W}),r.a.createElement(ne.a,{exact:!0,path:"/dashboard",component:_})))):r.a.createElement("div",{id:"loader"},r.a.createElement(u.c,null))}c.a.render(r.a.createElement(ie,null),document.getElementById("root"))},97:function(e,a,t){e.exports=t.p+"static/media/neutral.9fb28d9a.png"}},[[231,2,1]]]);
//# sourceMappingURL=main.287a9928.chunk.js.map